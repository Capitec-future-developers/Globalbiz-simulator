<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles/Phone-card.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="../images/profile.jpg">
    <title>iPhone with White LCD</title>
</head>
<body>

<div class="search-container">
    <input type="text" id="automation-search" placeholder="What would you like to do? (e.g., 'Pay saved beneficiary')">
    <button id="execute-automation" class="search-button">
        <span class="material-icons-sharp">search</span> Go
    </button>
    <div id="suggestions-dropdown" class="suggestions-dropdown"></div>
</div>

<div class="iphone">
    <div class="volume-buttons">
        <div class="volume-up"></div>
        <div class="volume-down"></div>
    </div>
    <div class="power-button"></div>
    <div class="screen">
        <div class="notch"></div>
        <div class="screen-content">
            <div class="head" style=" background-color: #2C3C4C;">
                <a href="Phone2.html" class="arrow" id="sidebarToggle" style=" background-color: #2C3C4C;">
                    <span class="material-icons-sharp" style=" background-color: #2C3C4C;">arrow_back</span>
                </a>
                <div class="header" style="right: -115px; font-size: 20px;">Cards</div>
            </div>

            <!-- Main Content Area -->
            <div class="content" id="mainContent">
                <div class="account">
                    <div class="account-header">
                        <h4 style="font-weight: 300;">Add new card</h4>
                        <div class="add-new" id="Add-Card">
                            <span class="material-icons-sharp" style="background-color: white;">add_circle</span>
                        </div>
                    </div>

                    <div class="box">
                        <!-- Debit Card -->
                        <div class="box1">
                            <span class="material-icons-sharp"><img src="../images/transact.svg" alt="transact"></span>
                            <span class="separator"></span>
                            <div class="account-details">
                                <span class="account-name">Debit</span>
                                <a href="#" class="View" id="debitToggle">
                                    <span class="material-icons-sharp">arrow_downwards</span>
                                </a>
                                <!-- Dropdown for Debit -->
                                <div class="dropdown-content" id="debit-dropdown">
                                    <div class="card-top">
                                        <img src="../images/card.png" alt="Debit Card" class="card-img" id="debit-card">
                                        <div class="card-info">
                                            <p>Kodi Banks</p>
                                            <p>4016**** ****3734</p>
                                        </div>
                                    </div>
                                    <div class="separator"></div>
                                    <div class="status-row">
                                        <div class="status">Active</div>
                                        <span class="material-icons-sharp">chevron_right</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Virtual Card -->
                        <div class="box1" style="top: 190px;"> <!-- Positioned below Debit Card -->
                            <span class="material-icons-sharp"><img src="../images/transact.svg" alt="transact" style="filter: brightness(0) invert(50%) contrast(80%)"/></span>
                            <span class="separator"></span>
                            <div class="account-details">
                                <span class="account-name">Virtual</span>
                                <a href="#" class="View" id="virtualToggle">
                                    <span class="material-icons-sharp">arrow_downwards</span>
                                </a>
                                <!-- Dropdown for Virtual Card -->
                                <div class="dropdown-content" id="virtual-dropdown" style="color: grey;">
                                    <div class="card-top">
                                        <img src="../images/virtuale.png" alt="Virtual Card" class="card-img">
                                        <div class="card-info">
                                            <p>Kodi Virtual</p>
                                            <p>4016**** ****1234</p>
                                        </div>
                                    </div>
                                    <div class="separator"></div>
                                    <div class="status-row">
                                        <div class="status">Active</div>
                                        <span class="material-icons-sharp">chevron_right</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Bottom Navigation -->
            <div class="bottom-nav">
                <a href="Phone2.html" class="nav-item" id="Home">
                    <span class="nav-icon material-icons-outlined">home</span>
                    <span>Home</span>
                </a>
                <a href="Phone%20accounts.html" class="nav-item">
                    <span class="nav-icon material-icons-outlined">storage</span>
                    <span>Accounts</span>
                </a>
                <a href="Phone%20Transact.html" class="nav-item" id="transact">
                    <img src="../images/transact.svg" alt="transact" style="filter: brightness(0) invert(50%) contrast(80%)"/>
                    <span>Transact</span>
                </a>
                <a href="Phone-cards.html" class="nav-item active">
                    <span class="nav-icon material-icons-outlined">credit_card</span>
                    <span>Cards</span>
                </a>
                <a href="#" class="nav-item">
                    <span class="nav-icon material-icons-outlined">search</span>
                    <span>Explore</span>
                </a>
            </div>
        </div>
    </div>
    <div class="home-indicator"></div>
</div>
<script >
    const debitBtn = document.getElementById('debitToggle');
    const debitDropdown = document.getElementById('debit-dropdown');

    const virtualBtn = document.getElementById('virtualToggle');
    const virtualDropdown = document.getElementById('virtual-dropdown');

    debitBtn.addEventListener('click', (e) => {
        e.preventDefault();
        debitDropdown.classList.toggle('show');
        virtualDropdown.classList.remove('show');
    });

    virtualBtn.addEventListener('click', (e) => {
        e.preventDefault();
        virtualDropdown.classList.toggle('show');
        debitDropdown.classList.remove('show');
    });
</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const addCardBtn = document.getElementById('Add-Card');

// Create popup overlay
        const popupOverlay = document.createElement('div');
        popupOverlay.id = 'add-card-overlay';
        popupOverlay.className = 'popup-overlay';

        const popupContent = document.createElement('div');
        popupContent.id = 'add-card-popup';
        popupContent.className = 'popup-content';

// Add notch
        const notch = document.createElement('div');
        notch.className = 'notch';
        popupContent.appendChild(notch);

// Create header
        const popupHeader = document.createElement('div');
        popupHeader.className = 'popup-header';

        const popupTitle = document.createElement('h2');
        popupTitle.textContent = 'Add New Card';
        popupHeader.appendChild(popupTitle);

// Create scrollable content container
        const scrollableContent = document.createElement('div');
        scrollableContent.className = 'scrollable-content';

// Card image section
        const cardImageContainer = document.createElement('div');
        cardImageContainer.className = 'card-image-container';

        const cardImage = document.createElement('img');
        cardImage.id = 'card-type-image';
        cardImage.src = '../images/card.png';
        cardImage.alt = 'Card Preview';
        cardImage.className = 'card-image';
        cardImageContainer.appendChild(cardImage);

// Card type options
        const cardTypeContainer = document.createElement('div');
        cardTypeContainer.className = 'card-type-container';

        const createCardOption = (labelText, value, isChecked = false) => {
            const box = document.createElement('div');
            box.className = 'card-option-box';

            const label = document.createElement('label');
            label.className = 'card-option-label';

            const span = document.createElement('span');
            span.textContent = labelText;

            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = 'cardType';
            radio.value = value;
            radio.id = `${value}-card-option`;
            radio.checked = isChecked;

            label.appendChild(span);
            label.appendChild(radio);
            box.appendChild(label);

            return { box, radio };
        };

        const { box: debitBox, radio: debitRadio } = createCardOption('New Debit Card', 'debit', true);
        const { box: virtualBox, radio: virtualRadio } = createCardOption('New Virtual Card', 'virtual');

        cardTypeContainer.appendChild(debitBox);
        cardTypeContainer.appendChild(virtualBox);

// Virtual Card Additional Options (hidden by default)
        const virtualCardOptions = document.createElement('div');
        virtualCardOptions.id = 'virtual-card-options';
        virtualCardOptions.style.display = 'none';

// Link to account section
        const linkAccountSection = document.createElement('div');
        linkAccountSection.className = 'form-section';

        const linkAccountLabel = document.createElement('label');
        linkAccountLabel.textContent = 'Link to account';
        linkAccountLabel.className = 'section-label';
        linkAccountSection.appendChild(linkAccountLabel);

        const accountDropdown = document.createElement('select');
        accountDropdown.className = 'form-dropdown';
        accountDropdown.innerHTML = `
<option value="" disabled selected>Choose account</option>
<option value="1052 2626 43">Kodi Code 1052 2626 43</option>
`;
        linkAccountSection.appendChild(accountDropdown);

// Preferred name section
        const preferredNameSection = document.createElement('div');
        preferredNameSection.className = 'form-section';

        const preferredNameLabel = document.createElement('label');
        preferredNameLabel.textContent = 'Preferred name on card';
        preferredNameLabel.className = 'section-label';
        preferredNameSection.appendChild(preferredNameLabel);

        const nameInput = document.createElement('input');
        nameInput.type = 'text';
        nameInput.placeholder = 'Enter preferred name';
        nameInput.className = 'form-input';
        preferredNameSection.appendChild(nameInput);

// Card holder options
        const cardHolderSection = document.createElement('div');
        cardHolderSection.className = 'form-section';

        const cardHolderLabel = document.createElement('label');
        cardHolderLabel.textContent = 'Card holder name';
        cardHolderLabel.className = 'section-label';
        cardHolderSection.appendChild(cardHolderLabel);

        const createCardHolderOption = (name) => {
            const optionDiv = document.createElement('div');
            optionDiv.className = 'card-holder-option';

            const label = document.createElement('label');
            label.className = 'card-holder-label';

            const nameSpan = document.createElement('span');
            nameSpan.textContent = name;

            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = 'cardHolder';
            radio.value = name;
            radio.className = 'blue-radio';

            label.appendChild(nameSpan);
            label.appendChild(radio);
            optionDiv.appendChild(label);

            return optionDiv;
        };

        cardHolderSection.appendChild(createCardHolderOption('MR O Mohlala'));
        cardHolderSection.appendChild(createCardHolderOption('MR Omphile M'));
        cardHolderSection.appendChild(createCardHolderOption('MR Omphile Mohlala'));

        virtualCardOptions.appendChild(linkAccountSection);
        virtualCardOptions.appendChild(preferredNameSection);
        virtualCardOptions.appendChild(cardHolderSection);

// Buttons
        const buttonsContainer = document.createElement('div');
        buttonsContainer.className = 'popup-buttons';

        const continueBtn = document.createElement('button');
        continueBtn.textContent = 'Continue';
        continueBtn.className = 'continue-btn';

        const cancelBtn = document.createElement('button');
        cancelBtn.textContent = 'Cancel';
        cancelBtn.className = 'cancel-btn';

        buttonsContainer.appendChild(continueBtn);
        buttonsContainer.appendChild(cancelBtn);

// Assemble popup
        popupContent.appendChild(popupHeader);

// Add content to scrollable container
        scrollableContent.appendChild(cardImageContainer);
        scrollableContent.appendChild(cardTypeContainer);
        scrollableContent.appendChild(virtualCardOptions);

// Add scrollable container to popup
        popupContent.appendChild(scrollableContent);
        popupContent.appendChild(buttonsContainer);

        popupOverlay.appendChild(popupContent);
        document.querySelector('.screen-content').appendChild(popupOverlay);

// Event listeners
        addCardBtn.addEventListener('click', () => {
            popupOverlay.style.display = 'block';
// Reset form when opening
            virtualCardOptions.style.display = 'none';
            debitRadio.checked = true;
            cardImage.src = '../images/card.png';
// Reset scroll position
            scrollableContent.scrollTop = 0;
        });

        cancelBtn.addEventListener('click', () => {
            popupOverlay.style.display = 'none';
        });

        debitRadio.addEventListener('change', () => {
            if (debitRadio.checked) {
                cardImage.src = '../images/card.png';
                virtualCardOptions.style.display = 'none';
// Adjust scrollable content height
                scrollableContent.style.overflowY = 'hidden';
            }
        });

        virtualRadio.addEventListener('change', () => {
            if (virtualRadio.checked) {
                cardImage.src = '../images/virtuale.png';
                virtualCardOptions.style.display = 'block';
// Enable scrolling for virtual card content
                scrollableContent.style.overflowY = 'auto';
// Set max height for scrollable content
                const headerHeight = popupHeader.offsetHeight;
                const buttonsHeight = buttonsContainer.offsetHeight;
                scrollableContent.style.maxHeight = `calc(100% - ${headerHeight + buttonsHeight + 20}px)`;
            }
        });

        continueBtn.addEventListener('click', () => {
            const selectedCardType = document.querySelector('input[name="cardType"]:checked').value;

            if (selectedCardType === 'virtual') {
// Check if all virtual card options are filled
                if (!accountDropdown.value) {
                    alert('Please select an account to link');
                    return;
                }

                if (!nameInput.value.trim()) {
                    alert('Please enter a preferred name for the card');
                    return;
                }

                if (!document.querySelector('input[name="cardHolder"]:checked')) {
                    alert('Please select a card holder');
                    return;
                }

// Show limits page
                showLimitsPage();
            } else {
                alert('Continue with Debit Card');
                popupOverlay.style.display = 'none';
            }
        });

        popupOverlay.addEventListener('click', (e) => {
            if (e.target === popupOverlay) popupOverlay.style.display = 'none';
        });

// Function to show limits page
        function showLimitsPage() {
// Clear current content
            popupContent.innerHTML = '';

// Add notch
            const notch = document.createElement('div');
            notch.className = 'notch';
            popupContent.appendChild(notch);

// Create header
            const popupHeader = document.createElement('div');
            popupHeader.className = 'popup-header';

            const popupTitle = document.createElement('h2');
            popupTitle.textContent = 'Set Card Limits';
            popupHeader.appendChild(popupTitle);
            popupContent.appendChild(popupHeader);

// Create scrollable container for limits
            const scrollableLimits = document.createElement('div');
            scrollableLimits.className = 'scrollable-content';

// Limits form
            const limitsForm = document.createElement('div');
            limitsForm.className = 'limits-form';

            const createLimitInput = (labelText, defaultValue) => {
                const limitDiv = document.createElement('div');
                limitDiv.className = 'limit-input';

                const label = document.createElement('label');
                label.textContent = labelText;
                label.className = 'limit-label';

                const inputContainer = document.createElement('div');
                inputContainer.className = 'input-container';

                const currency = document.createElement('span');
                currency.textContent = 'R';
                currency.className = 'currency';

                const input = document.createElement('input');
                input.type = 'number';
                input.value = defaultValue;
                input.className = 'limit-value';

                inputContainer.appendChild(currency);
                inputContainer.appendChild(input);
                limitDiv.appendChild(label);
                limitDiv.appendChild(inputContainer);

                return limitDiv;
            };

            limitsForm.appendChild(createLimitInput('Per Transaction Limit', '250000'));
            limitsForm.appendChild(createLimitInput('Daily Limit', '250000'));
            limitsForm.appendChild(createLimitInput('Monthly Limit', '250000'));

            scrollableLimits.appendChild(limitsForm);
            popupContent.appendChild(scrollableLimits);

// Buttons
            const buttonsContainer = document.createElement('div');
            buttonsContainer.className = 'popup-buttons';

            const setLimitsBtn = document.createElement('button');
            setLimitsBtn.textContent = 'Set Limits';
            setLimitsBtn.className = 'continue-btn';

            const cancelLimitsBtn = document.createElement('button');
            cancelLimitsBtn.textContent = 'Cancel';
            cancelLimitsBtn.className = 'cancel-btn';

            buttonsContainer.appendChild(setLimitsBtn);
            buttonsContainer.appendChild(cancelLimitsBtn);
            popupContent.appendChild(buttonsContainer);

// Set scrollable area height for limits page
            const headerHeight = popupHeader.offsetHeight;
            const buttonsHeight = buttonsContainer.offsetHeight;
            scrollableLimits.style.maxHeight = `calc(100% - ${headerHeight + buttonsHeight + 20}px)`;
            scrollableLimits.style.overflowY = 'auto';

// Event listeners for buttons
            setLimitsBtn.addEventListener('click', () => {
                alert('Card limits set successfully!');
                popupOverlay.style.display = 'none';
            });

            cancelLimitsBtn.addEventListener('click', () => {
                popupOverlay.style.display = 'none';
            });
        }
    });
</script>
<script src="../scripts/App.js"></script>
<script src="../scripts/Automation.js"></script>
</body>

</html>

